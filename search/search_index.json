{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"iCliGo Payment API Documentation","text":"<p>This API allows you to manage payment intents, enabling payment capture, cancellations, and refunds.</p>"},{"location":"#authentication","title":"Authentication","text":"<p>To authenticate, include the following headers with all your API requests:</p> <ul> <li>X-Application-Id: Your application ID.</li> <li>X-Access-Token: A token used to authenticate your application's access to the API.</li> </ul> <p>The API will return a 400 Bad Request response if these headers are missing or invalid. If the payment request is associated with an unauthorized or incorrect Application ID, a 401 Unauthorised response will be returned. If an attempt is made to access a forbidden resource, a 403 Forbidden response is returned.</p> <p>Test Mode Support:</p> <p>Our system supports a test mode using test credentials, where to activate this mode it is necessary to make a request using test credentials. The corresponding intent will be marked as a test, and all later operations must use the same test credentials.</p>"},{"location":"#errors","title":"Errors","text":"<p>We have normalized the error payload, where all the errors obey the same format in order to be easier to read the error.</p> <p>The error payload includes the following parameters:</p> Parameter Type Description Example timestamp long Unix timestamp (in milliseconds) when the error occurred 1694181328000 status int HTTP status code of the error 400 error string Brief description of the error type \"Bad Request\" message string Detailed error message providing more information about the error \"Invalid request: missing required fields.\" path string The API endpoint path where the error occurred \"/payments/create-payment-intent\" <p>Error Payload Example:</p> <pre><code>{\n  \"timestamp\": 1727169321150,\n  \"status\": 400,\n  \"error\": \"Bad Request\",\n  \"message\": \"Headers 'X-Access-Token' and 'X-Application-Id' are necessary.\",\n  \"path\": \"/payments/create-payment-intent\"\n}\n</code></pre> <p>HTTP Status code summary</p> Code Status Description 200 OK Everything worked as expected. 400 Bad Request The request was unacceptable, often due to missing a required parameter or some auth aspect like the headers. 401 Unauthorized No valid pairs of auth headers was provided. 403 Forbidden The client doesn\u2019t have permissions to perform the request 404 Not Found The requested resource doesn\u2019t exist. 500 Server Errors Something went wrong on iCliGo's end."},{"location":"#field-validation","title":"Field Validation","text":"<p>Our API provides detailed error responses for invalid or missing fields across different levels of object complexity:</p> <ul> <li>Root-Level Field Errors: When a required field at the top level is missing or invalid, the error message will   specify the exact field name.   Example: \"name\" is missing.</li> <li>Nested Object Field Errors: For fields within nested objects, the error message includes the full path to the   field.   Example: <code>\"resume.owner\"</code> indicates an issue with the <code>owner</code> field inside the <code>resume</code> object.</li> <li>Array Field Errors: Errors in array elements include the specific array index and nested field path.   Example: <code>\"product[1].details.night\"</code> points to the <code>night</code> field in the details of the second product (index 1).</li> <li>Serialization Field Errors: Errors that occur during the serialization process, e.g., when an enumeration value is   invalid.   Example: <code>\"intentType: Value 'BOOKINx' is not valid for field 'intentType' (expected type: IntentType)\"</code>.</li> <li>Malformed JSON: For errors caused by malformed JSON, the error message will be generic, stating: <code>\"Malformed JSON request\"</code>.</li> </ul> <p>Examples:</p> <pre><code>{\n  \"timestamp\": 1732807499846,\n  \"status\": 400,\n  \"error\": \"Bad Request\",\n  \"message\": \"Invalid request payload. Reason(s): {'product[1].details.night':'Is required for product type CRUISE'}\",\n  \"path\": \"/payments/create-payment-intent\"\n}\n</code></pre> <pre><code>{\n  \"timestamp\": 1732810810592,\n  \"status\": 400,\n  \"error\": \"Bad Request\",\n  \"message\": \"Invalid request payload. Reason(s): {'products.[1].detail.circuit.[0].checkin':'Value abc is not valid! Expected type: Date'}\",\n  \"path\": \"/payments/create-payment-intent\"\n}\n</code></pre> <pre><code>{\n  \"timestamp\": 1732810694764,\n  \"status\": 400,\n  \"error\": \"Bad Request\",\n  \"message\": \"Invalid request payload. Reason(s): {'General':'Malformed JSON request.'}\",\n  \"path\": \"/payments/create-payment-intent\"\n}\n</code></pre>"},{"location":"#payment-flow","title":"Payment Flow","text":""},{"location":"#1-create-payment-intent","title":"1. Create Payment Intent","text":"<p>To initiate a payment, you first need to create a payment intent. This intent holds all the necessary information to facilitate the payment process.</p> <p>API Endpoint:</p> <ul> <li>Method: POST</li> <li>Path: <code>/payments/create-payment-intent</code></li> </ul>"},{"location":"#request","title":"Request","text":"<p>This request contains all the necessary information about the payment, such as the client making the purchase, the product being bought, and additional details like success/failure URLs and whether manual capture is required.</p> <p>Note</p> <p>To create a test intent make the request with the test credentials.</p> <p>Note</p> <p>The product array can accommodate various product types. The following example demonstrates an intent with one of all available products. For detailed payload information, please refer to the specific ProductDto documentation.</p> <p>Request DTO: CreateIntentRequest</p> Request Payload Example With All Products <pre><code>{\n  \"userId\": \"5c6bd4ff-fe65-4899-ac50-af305c27f86d\",\n  \"userEmail\": \"joedoe@email.com\",\n  \"userContact\": \"+351 910 000 000\",\n  \"userName\": \"Joe Doe\",\n  \"cancellationFees\": [\n    {\n      \"limitDate\": \"2000-12-12\",\n      \"price\": \"10.00\"\n    }\n  ],\n  \"cancellationFeesStrings\": [\n    \"Non-refundable.\",\n    \"Refundable until 12-12-2000 with a fee of 10.00.\",\n    \"string ....\"\n  ],\n  \"resume\": {\n    \"owner\": \"Bob Smith\",\n    \"clients\": [\n      {\n        \"name\": \"Name 1\",\n        \"email\": \"email@email.com\",\n        \"dateOfBirth\": \"2000-10-10\",\n        \"children\": false\n      },\n      {\n        \"name\": \"Name 2\",\n        \"email\": \"email2@email.com\",\n        \"dateOfBirth\": \"2000-10-10\",\n        \"children\": false\n      }\n    ]\n  },\n  \"intentType\": \"BOOKING\",\n  \"productId\": \"my-product-id-123\",\n  \"products\": [\n    {\n      \"type\": \"FLIGHT\",\n      \"name\": \"TAP air PORTUGAL\",\n      \"checkin\": \"2024-12-04\",\n      \"importantInfo\": \"Important notes ...\",\n      \"detail\": {\n        \"flightNumber\": \"1234546\",\n        \"departure\": \"2024-12-05\",\n        \"arrival\": \"2024-12-20\",\n        \"departureTime\": \"10:00\",\n        \"arrivalTime\": \"16:00\",\n        \"departureAirport\": \"OPO\",\n        \"arrivalAirport\": \"IST\",\n        \"departureCity\": \"Porto\",\n        \"arrivalCity\": \"Istanbul\",\n        \"departureCountry\": \"Portugal\",\n        \"arrivalCountry\": \"Turkey\",\n        \"baggage\": \"1\",\n        \"duration\": \"4h\"\n      }\n    },\n    {\n      \"type\": \"CRUISE\",\n      \"name\": \"cruise name\",\n      \"checkin\": \"2024-12-15\",\n      \"importantInfo\": \"Important notes ...\",\n      \"detail\": {\n        \"night\": 9,\n        \"roomType\": \"OCEAN_VIEW\",\n        \"regime\": \"all-inclusive\",\n        \"circuit\": [\n          {\n            \"checkin\": \"2024-12-11T11:03:42.501+00:00\",\n            \"checkout\": \"2024-12-11T11:03:42.501+00:00\",\n            \"location\": \"Turkey\"\n          },\n          {\n            \"checkin\": \"2024-12-20T11:03:42.501+00:00\",\n            \"checkout\": \"2024-12-20T11:03:42.501+00:00\",\n            \"location\": \"Turkey\"\n          }\n        ]\n      }\n    },\n    {\n      \"type\": \"TRANSFER\",\n      \"name\": \"BUS 309\",\n      \"location\": \"Istanbul\",\n      \"transport\": \"BUS\",\n      \"checkin\": \"2024-12-20\",\n      \"checkout\": \"2024-12-20\",\n      \"importantInfo\": \"Important notes ...\",\n      \"detail\": {\n        \"provider\": \"Istanbul Transfers\",\n        \"reception\": \"Crowne Plaza: Istanbul - Old City\",\n        \"receptionTime\": \"2024-09-20T16:00\",\n        \"destinationTime\": \"2024-09-20T16:15\",\n        \"destination\": \"Istanbul Airport\"\n      }\n    },\n    {\n      \"type\": \"ACTIVITY\",\n      \"name\": \"Activity's name\",\n      \"location\": \"Istanbul\",\n      \"duration\": \"3h\",\n      \"checkin\": \"2024-12-15\",\n      \"checkout\": \"2024-12-15\",\n      \"importantInfo\": \"Important notes ...\"\n    },\n    {\n      \"type\": \"INSURANCE\",\n      \"name\": \"Seguro XYZ\",\n      \"price\": 12,\n      \"importantInfo\": \"Important notes ...\"\n    },\n    {\n      \"type\": \"EVENT\",\n      \"name\": \"Event's name\",\n      \"location\": \"Istanbul\",\n      \"checkin\": \"2021-12-01\",\n      \"checkout\": \"2021-12-10\",\n      \"importantInfo\": \"Important notes ...\"\n    },\n    {\n      \"type\": \"ACCOMMODATION\",\n      \"name\": \"Hotel's name\",\n      \"location\": \"Istanbul\",\n      \"checkin\": \"2024-12-05\",\n      \"checkout\": \"2024-12-20\",\n      \"importantInfo\": \"Important notes ...\",\n      \"detail\": {\n        \"night\": 9,\n        \"roomType\": \"OCEAN_VIEW\",\n        \"regime\": \"all-inclusive\"\n      }\n    }\n  ],\n  \"company\": \"icligo.pt\",\n  \"currency\": \"EUR\",\n  \"micrositeCurrency\": \"EUR\",\n  \"microsite\": \"icligo.pt\",\n  \"country\": \"pt\",\n  \"manualCapture\": true,\n  \"successUrl\": \"https://success.com\",\n  \"failureUrl\": \"https://failure.com\",\n  \"ideaId\": \"15847300\",\n  \"amount\": 100.0,\n  \"micrositeAmount\": 100.0,\n  \"totalAmountService\": 2500.00\n}\n</code></pre>"},{"location":"#responses","title":"Responses","text":"<p>Success response (200 OK)</p> <p>The success response returns the submitted information along with additional details, such as the amounts authorized, captured, etc.</p> <p>Response DTO: ExternalPaymentDto</p> Response Example With All Products <pre><code>{\n    \"id\": \"b91c35cc-db74-4663-a491-bed750686faa\",\n    \"clientId\": \"travel-c-app-test\",\n    \"userId\": \"5c6bd4ff-fe65-4899-ac50-af305c27f86d\",\n    \"productId\": \"my-product-id-123\",\n    \"intentType\": \"BOOKING\",\n    \"resume\": {\n        \"owner\": \"Bob Smith\",\n        \"clients\": [\n            {\n                \"name\": \"Name 1\",\n                \"email\": \"email@email.com\",\n                \"dateOfBirth\": \"2000-10-10\",\n                \"children\": false\n            },\n            {\n                \"name\": \"Name 2\",\n                \"email\": \"email2@email.com\",\n                \"dateOfBirth\": \"2000-10-10\",\n                \"children\": false\n            }\n        ]\n    },\n    \"products\": [\n        {\n            \"type\": \"FLIGHT\",\n            \"name\": \"TAP air PORTUGAL\",\n            \"checkin\": \"2024-12-04\",\n            \"detail\": {\n                \"flightNumber\": \"1234546\",\n                \"departure\": \"2024-12-05\",\n                \"arrival\": \"2024-12-20\",\n                \"departureTime\": \"10:00\",\n                \"arrivalTime\": \"16:00\",\n                \"departureAirport\": \"OPO\",\n                \"arrivalAirport\": \"IST\",\n                \"departureCity\": \"Porto\",\n                \"arrivalCity\": \"Istanbul\",\n                \"departureCountry\": \"Portugal\",\n                \"arrivalCountry\": \"Turkey\",\n                \"baggage\": \"1\",\n                \"duration\": \"4h\"\n            },\n            \"importantInfo\": \"Important notes ...\"\n        },\n        {\n            \"type\": \"CRUISE\",\n            \"name\": \"cruise name\",\n            \"checkin\": \"2024-12-15\",\n            \"detail\": {\n                \"night\": 9,\n                \"roomType\": \"OCEAN_VIEW\",\n                \"regime\": \"all-inclusive\",\n                \"circuit\": [\n                    {\n                        \"checkin\": \"2024-12-11T11:03:42.501+00:00\",\n                        \"checkout\": \"2024-12-11T11:03:42.501+00:00\",\n                        \"location\": \"Turkey\"\n                    },\n                    {\n                        \"checkin\": \"2024-12-20T11:03:42.501+00:00\",\n                        \"checkout\": \"2024-12-20T11:03:42.501+00:00\",\n                        \"location\": \"Turkey\"\n                    }\n                ]\n            },\n            \"importantInfo\": \"Important notes ...\"\n        },\n        {\n            \"type\": \"TRANSFER\",\n            \"name\": \"BUS 309\",\n            \"location\": \"Istanbul\",\n            \"transport\": \"BUS\",\n            \"checkin\": \"2024-12-20\",\n            \"checkout\": \"2024-12-20\",\n            \"detail\": {\n                \"provider\": \"Istanbul Transfers\",\n                \"reception\": \"Crowne Plaza: Istanbul - Old City\",\n                \"receptionTime\": \"2024-09-20T16:00\",\n                \"destinationTime\": \"2024-09-20T16:15\",\n                \"destination\": \"Istanbul Airport\"\n            },\n            \"importantInfo\": \"Important notes ...\"\n        },\n        {\n            \"type\": \"ACTIVITY\",\n            \"name\": \"Activity's name\",\n            \"location\": \"Istanbul\",\n            \"duration\": \"3h\",\n            \"checkin\": \"2024-12-15\",\n            \"checkout\": \"2024-12-15\",\n            \"importantInfo\": \"Important notes ...\"\n        },\n        {\n            \"type\": \"INSURANCE\",\n            \"name\": \"Seguro XYZ\",\n            \"price\": 12,\n            \"importantInfo\": \"Important notes ...\"\n        },\n        {\n            \"type\": \"EVENT\",\n            \"name\": \"Event's name\",\n            \"location\": \"Istanbul\",\n            \"checkin\": \"2021-12-01\",\n            \"checkout\": \"2021-12-10\",\n            \"importantInfo\": \"Important notes ...\"\n        },\n        {\n            \"type\": \"ACCOMMODATION\",\n            \"name\": \"Hotel's name\",\n            \"location\": \"Istanbul\",\n            \"checkin\": \"2024-12-05\",\n            \"checkout\": \"2024-12-20\",\n            \"detail\": {\n                \"night\": 9,\n                \"roomType\": \"OCEAN_VIEW\",\n                \"regime\": \"all-inclusive\"\n            },\n            \"importantInfo\": \"Important notes ...\"\n        }\n    ],\n    \"company\": \"icligo.pt\",\n    \"microsite\": \"icligo.pt\",\n    \"country\": \"pt\",\n    \"currency\": \"EUR\",\n    \"state\": \"CREATED\",\n    \"amount\": 100.0,\n    \"totalAmountService\": 2500.00,\n    \"capturedAmount\": 0,\n    \"authorizedAmount\": 0,\n    \"refundedAmount\": 0,\n    \"manualCapture\": true,\n    \"captureDetails\": [],\n    \"refundDetails\": [],\n    \"successUrl\": \"https://success.com\",\n    \"failureUrl\": \"https://failure.com\",\n    \"testMode\": true\n}\n</code></pre> <p>Error responses</p> 400 Bad Request The request was unacceptable, often due to missing a required parameter or some auth aspect like the headers. 401 Unauthorized No valid pairs of auth headers was provided. 500 Server Errors Something went wrong on iCliGo's end."},{"location":"#2-payment-page-widget","title":"2. Payment Page / Widget","text":"<p>After creating the payment intent, direct the user to the payment page or widget. This part is abstracted for you. The user will complete the payment, and you will receive a webhook with the payment status: AUTHORIZED (for manual capture) or COMPLETED (for automatic capture).</p> <p>Note</p> <p>For more information about how the widget works, please refer to the Widget Documentation.</p>"},{"location":"#3-payment-capture-manual-vs-automatic","title":"3. Payment Capture (Manual vs. Automatic)","text":""},{"location":"#31-manual-payment-flow","title":"3.1 Manual Payment Flow","text":"<p>If manual capture is selected, it\u2019s necessary to proceed with the capture after the payment has been authorized. In automatic capture mode, the capture occurs automatically.</p> <p>In the case of manual capture, the system will send a webhook with the AUTHORIZED status once the user has paid for the order. This indicates that the payment has been authorized and the amount is ready to be captured.</p> <p>Afterward, it's necessary to call the <code>Capture</code> endpoint to complete the operation.</p> <p>API Endpoint:</p> <ul> <li>Method: PUT</li> <li>Path: <code>/payments/{payment_id}/capture</code></li> <li>Path Variables:<ul> <li>payment_id: The ID of the payment intent.</li> </ul> </li> </ul>"},{"location":"#request_1","title":"Request","text":"<p>The request specifies the amount to be captured and includes an optional description.</p> <p>Request DTO: ExternalConfirmPaymentRequest</p> Request Payload Example <pre><code>{\n    \"amount\": 10.0,\n    \"description\": \"Captured description.\"\n}\n</code></pre>"},{"location":"#responses_1","title":"Responses","text":"<p>Success response (200 OK)</p> <p>The response is an object detailing the date when the capture occurred, along with the captured amount presented as a list of captures.</p> <p>Response DTO: ConfirmPaymentResponse</p> <p>Tip</p> <p>Although the response includes a <code>list</code> of <code>CaptureDetail</code> objects, currently only a single capture is allowed. Therefore, you can expect the list to always contain just one element.</p> Response Example <pre><code>{\n    \"date\": 1727193013453,\n    \"capturedAmountInfo\": {\n        \"currency\": \"EUR\",\n        \"value\": 10.0\n    },\n    \"captures\": [\n        {\n            \"id\": \"66f2df95-659b-a21d-974d-ba3b489d50d9\",\n            \"description\": \"Captured by client\",\n            \"captureTime\": 1727193004172,\n            \"amount\": {\n                \"currency\": \"EUR\",\n                \"value\": 10.0\n            }\n        }\n    ]\n}\n</code></pre> <p>Note</p> <p>Upon capture, a COMPLETED webhook will be sent, indicating that the payment has been successfully confirmed and captured.</p> <p>Error responses</p> Code Description Details 400 Bad Request The request was unacceptable, often due to missing required parameters or incorrect authorization headers. 401 Unauthorized No valid authentication headers were provided. 403 Forbidden The client lacks the necessary permissions to perform the request. 500 Server Error An issue occurred on iCliGo\u2019s side."},{"location":"#32-automatic-capture-payment-flow","title":"3.2 Automatic Capture Payment Flow","text":"<p>In this scenario, the AUTHORIZED webhook is suppressed. When the client pays for the order, a COMPLETED webhook is sent, indicating that the order is completed and the funds have been captured.</p>"},{"location":"#4-cancel-payment","title":"4. Cancel Payment","text":"<p>A payment can only be canceled if its status is either Created or Authorized. Payments cannot be canceled once they are completed.</p> <p>API Endpoint:</p> <ul> <li>Method: PUT</li> <li>Path: <code>/payments/{payment_id}/cancel</code></li> <li>Path Variables:<ul> <li>payment_id: The ID of the payment intent.</li> </ul> </li> </ul>"},{"location":"#request_2","title":"Request","text":"<p>This request does not require a body. The specified payment intent will be canceled by making a PUT request to this endpoint using the provided payment_id.</p>"},{"location":"#responses_2","title":"Responses","text":"<p>Success response (200 OK)</p> <p>The success response returns the cancellation date.</p> <p>Request DTO: ExternalCancelPaymentResponse</p> Basic Response Example <pre><code>{\n  \"date\": \"1727193013453\",\n}\n</code></pre> <p>Error responses</p> Code Description Details 400 Bad Request The request was unacceptable, often due to missing required parameters or incorrect authorization headers. 401 Unauthorized No valid authentication headers were provided. 403 Forbidden The client lacks the necessary permissions to perform the request. 500 Server Error An issue occurred on iCliGo\u2019s side."},{"location":"#5-refund","title":"5. Refund","text":"<p>Refunds a payment for a given payment ID</p> <p>API Endpoint:</p> <ul> <li>Method: POST</li> <li>Path: <code>/payments/{payment_id}/refund</code></li> <li>Path Variables:<ul> <li>payment_id: The ID of the payment intent.</li> </ul> </li> </ul>"},{"location":"#request_3","title":"Request","text":"<p>The request specifies the amount to be refunded and includes an optional description.</p> <p>Request DTO: ExternalRefundPaymentRequest</p> Request Payload Example <pre><code>{\n    \"amount\": \"10\",\n    \"description\": \"Refund description.\"\n}\n</code></pre>"},{"location":"#responses_3","title":"Responses","text":"<p>Success response (200 OK)</p> <p>The response is an object detailing the date when the refund occurred, along with the refund amount.</p> <p>Response DTO: RefundDetail</p> <p>Tip</p> <p>Although the response includes a <code>list</code> of <code>RefundDetail</code> objects, currently only a single refund is allowed. Therefore, you can expect the list to always contain just one element.</p> Response Example <pre><code>[\n  {\n      \"id\": \"4444d000-659b-a21d-974d-ba3b489d50d9\",\n      \"captureId\": \"66f2df95-659b-a21d-974d-ba3b489d50d9\",\n      \"createTime\": 1727193013453,\n      \"description\": \"Refund Description\",\n      \"amount\": {\n          \"currency\": \"EUR\",\n          \"value\": 10.0\n      }\n  }\n]\n</code></pre> <p>Error responses</p> Code Description Details 400 Bad Request The request was unacceptable, often due to missing required parameters or incorrect authorization headers. 401 Unauthorized No valid authentication headers were provided. 403 Forbidden The client lacks the necessary permissions to perform the request. 500 Server Error An issue occurred on iCliGo\u2019s side."},{"location":"#6-retrieve","title":"6. Retrieve","text":"<p>For a given ID retrieve all the information about the payment intent.</p> <p>API Endpoint:</p> <ul> <li>Method: GET</li> <li>Path: <code>/payments/{payment_id}/retrieve</code></li> <li>Path Variables:<ul> <li>payment_id: The ID of the payment intent.</li> </ul> </li> </ul>"},{"location":"#request_4","title":"Request","text":"<p>This request does not require a body. The specified payment intent will retrieve payment intent info by making a GET request to this endpoint using the provided payment_id.</p>"},{"location":"#responses_4","title":"Responses","text":"<p>Success response (200 OK)</p> <p>The response is an object detailing the payment intent info.</p> <p>Response DTO: ExternalPaymentDto</p> Response Example With All Products <pre><code>{\n    \"id\": \"b91c35cc-db74-4663-a491-bed750686faa\",\n    \"clientId\": \"travel-c-app-test\",\n    \"userId\": \"5c6bd4ff-fe65-4899-ac50-af305c27f86d\",\n    \"productId\": \"my-product-id-123\",\n    \"intentType\": \"BOOKING\",\n    \"resume\": {\n        \"owner\": \"Bob Smith\",\n        \"clients\": [\n            {\n                \"name\": \"Name 1\",\n                \"email\": \"email@email.com\",\n                \"dateOfBirth\": \"2000-10-10\",\n                \"children\": false\n            },\n            {\n                \"name\": \"Name 2\",\n                \"email\": \"email2@email.com\",\n                \"dateOfBirth\": \"2000-10-10\",\n                \"children\": false\n            }\n        ]\n    },\n    \"products\": [\n        {\n            \"type\": \"FLIGHT\",\n            \"name\": \"TAP air PORTUGAL\",\n            \"checkin\": \"2024-12-04\",\n            \"detail\": {\n                \"flightNumber\": \"1234546\",\n                \"departure\": \"2024-12-05\",\n                \"arrival\": \"2024-12-20\",\n                \"departureTime\": \"10:00\",\n                \"arrivalTime\": \"16:00\",\n                \"departureAirport\": \"OPO\",\n                \"arrivalAirport\": \"IST\",\n                \"departureCity\": \"Porto\",\n                \"arrivalCity\": \"Istanbul\",\n                \"departureCountry\": \"Portugal\",\n                \"arrivalCountry\": \"Turkey\",\n                \"baggage\": \"1\",\n                \"duration\": \"4h\"\n            },\n            \"importantInfo\": \"Important notes ...\"\n        },\n        {\n            \"type\": \"CRUISE\",\n            \"name\": \"cruise name\",\n            \"checkin\": \"2024-12-15\",\n            \"detail\": {\n                \"night\": 9,\n                \"roomType\": \"OCEAN_VIEW\",\n                \"regime\": \"all-inclusive\",\n                \"circuit\": [\n                    {\n                        \"checkin\": \"2024-12-11T11:03:42.501+00:00\",\n                        \"checkout\": \"2024-12-11T11:03:42.501+00:00\",\n                        \"location\": \"Turkey\"\n                    },\n                    {\n                        \"checkin\": \"2024-12-20T11:03:42.501+00:00\",\n                        \"checkout\": \"2024-12-20T11:03:42.501+00:00\",\n                        \"location\": \"Turkey\"\n                    }\n                ]\n            },\n            \"importantInfo\": \"Important notes ...\"\n        },\n        {\n            \"type\": \"TRANSFER\",\n            \"name\": \"BUS 309\",\n            \"location\": \"Istanbul\",\n            \"transport\": \"BUS\",\n            \"checkin\": \"2024-12-20\",\n            \"checkout\": \"2024-12-20\",\n            \"detail\": {\n                \"provider\": \"Istanbul Transfers\",\n                \"reception\": \"Crowne Plaza: Istanbul - Old City\",\n                \"receptionTime\": \"2024-09-20T16:00\",\n                \"destinationTime\": \"2024-09-20T16:15\",\n                \"destination\": \"Istanbul Airport\"\n            },\n            \"importantInfo\": \"Important notes ...\"\n        },\n        {\n            \"type\": \"ACTIVITY\",\n            \"name\": \"Activity's name\",\n            \"location\": \"Istanbul\",\n            \"duration\": \"3h\",\n            \"checkin\": \"2024-12-15\",\n            \"checkout\": \"2024-12-15\",\n            \"importantInfo\": \"Important notes ...\"\n        },\n        {\n            \"type\": \"INSURANCE\",\n            \"name\": \"Seguro XYZ\",\n            \"price\": 12,\n            \"importantInfo\": \"Important notes ...\"\n        },\n        {\n            \"type\": \"EVENT\",\n            \"name\": \"Event's name\",\n            \"location\": \"Istanbul\",\n            \"checkin\": \"2021-12-01\",\n            \"checkout\": \"2021-12-10\",\n            \"importantInfo\": \"Important notes ...\"\n        },\n        {\n            \"type\": \"ACCOMMODATION\",\n            \"name\": \"Hotel's name\",\n            \"location\": \"Istanbul\",\n            \"checkin\": \"2024-12-05\",\n            \"checkout\": \"2024-12-20\",\n            \"detail\": {\n                \"night\": 9,\n                \"roomType\": \"OCEAN_VIEW\",\n                \"regime\": \"all-inclusive\"\n            },\n            \"importantInfo\": \"Important notes ...\"\n        }\n    ],\n    \"company\": \"icligo.pt\",\n    \"microsite\": \"icligo.pt\",\n    \"country\": \"pt\",\n    \"currency\": \"EUR\",\n    \"state\": \"CREATED\",\n    \"amount\": 100.0,\n    \"totalAmountService\": 2500.00,\n    \"capturedAmount\": 0,\n    \"authorizedAmount\": 0,\n    \"refundedAmount\": 0,\n    \"manualCapture\": true,\n    \"captureDetails\": [],\n    \"refundDetails\": [],\n    \"successUrl\": \"https://success.com\",\n    \"failureUrl\": \"https://failure.com\",\n    \"testMode\": true\n}\n</code></pre> <p>Error responses</p> Code Description Details 400 Bad Request The request was unacceptable, often due to missing required parameters or incorrect authorization headers. 401 Unauthorized No valid authentication headers were provided. 403 Forbidden The client lacks the necessary permissions to perform the request. 500 Server Error An issue occurred on iCliGo\u2019s side."},{"location":"#important-considerations","title":"Important Considerations","text":"<ul> <li>Single Capture: A payment can only be captured once.</li> <li>Refunds: Multiple refunds are allowed, but the total refunded amount cannot exceed the amount of intent.</li> </ul>"},{"location":"AmountInfo/","title":"AmountInfo","text":""},{"location":"AmountInfo/#properties","title":"Properties","text":"Name Type Description Notes currency String Currency code for the payment. Must respect the ISO 4217 and be upper case. - value Number The total amount of the transaction in the specified currency. -"},{"location":"AmountInfo/#example","title":"Example","text":"<pre><code>{\n  \"amount\": 500,\n  \"currency\": \"EUR\"\n}\n</code></pre>"},{"location":"CancellationFeesDto/","title":"CancellationFeesDto","text":""},{"location":"CancellationFeesDto/#properties","title":"Properties","text":"Name Type Description Notes limitDate Date Limit date for cancellation, formatted as a string \"yyyy-MM-dd\". [required] price Number Price of the cancellation. Currency it is associated to the intent's currency. [required]"},{"location":"CancellationFeesDto/#example","title":"Example","text":"<pre><code>{\n  \"limitDate\": \"2000-12-12\",\n  \"price\": 10\n}\n</code></pre>"},{"location":"CaptureDetail/","title":"CaptureDetail","text":""},{"location":"CaptureDetail/#properties","title":"Properties","text":"Name Type Description Notes id String Unique identifier for the transaction or record. - captureTime long The timestamp when the transaction was captured. - description String Description of the capture. - amount AmountInfo Detailed information about the captured amount, including currency and value. -"},{"location":"CaptureDetail/#example","title":"Example","text":"<pre><code>{\n  \"id\": \"66f2df95-659b-a21d-974d-ba3b489d50d9\",\n  \"description\": \"Captured by client\",\n  \"captureTime\": 1727193004172,\n  \"amount\": {\n    \"currency\": \"EUR\",\n    \"value\": 10\n  }\n}\n</code></pre>"},{"location":"CircuitDto/","title":"CircuitDto","text":""},{"location":"CircuitDto/#properties","title":"Properties","text":"Name Type Description Notes checkin Date The date and time when the check-in occurs. [required] checkout Date The date and time when the check-out occurs. [required] location String The location associated with the check-in and check-out. [optional]"},{"location":"CircuitDto/#example","title":"Example","text":"<pre><code>{\n  \"checkin\": \"2024-12-24T11:03:42.501+00:00\",\n  \"checkout\": \"2024-12-24T11:03:42.501+00:00\",\n  \"location\": \"Turkey\"\n}\n</code></pre>"},{"location":"ClientDto/","title":"ClientDto","text":""},{"location":"ClientDto/#properties","title":"Properties","text":"Name Type Description Notes name String Name of the client. [required] email String Client's email address. [optional] dateOfBirth Date Client's date of birth, formatted as a string. [optional] children Boolean Indicates if the client is a child. [optional]"},{"location":"ClientDto/#example","title":"Example","text":"<pre><code>{\n  \"name\": \"Joe Doe\",\n  \"email\": \"joedoe@email.com\",\n  \"dateOfBirth\": \"2000-10-10\",\n  \"children\": false\n}\n</code></pre>"},{"location":"CompanyEnum/","title":"Company","text":"<ul> <li><code>ICLIGO_PT</code></li> <li><code>ICLIGO_ES</code></li> <li><code>ICLIGO_COM</code></li> </ul>"},{"location":"ConfirmPaymentResponse/","title":"ConfirmPaymentResponse","text":""},{"location":"ConfirmPaymentResponse/#properties","title":"Properties","text":"Name Type Description Notes date Date The date when the event or transaction occurred. - capturedAmountInfo AmountInfo Details about the amount that had been captured. - description String A brief description providing additional context or details if applicable. - captures CaptureDetail Information about individual captures related to the transaction. -"},{"location":"ConfirmPaymentResponse/#example","title":"Example","text":"<pre><code>{\n  \"date\": 1727193013453,\n  \"capturedAmountInfo\": {\n    \"currency\": \"EUR\",\n    \"value\": 10.0\n  },\n  \"captures\": [\n    {\n      \"id\": \"66f2df95-659b-a21d-974d-ba3b489d50d9\",\n      \"description\": \"Captured by client\",\n      \"captureTime\": 1727193004172,\n      \"amount\": {\n        \"currency\": \"EUR\",\n        \"value\": 10.0\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"CreateIntentRequest/","title":"CreateIntentRequest","text":""},{"location":"CreateIntentRequest/#properties","title":"Properties","text":"Name Type Description Notes clientId String Unique client identifier. Identifies the client that is making the request, in this case it'syour company/merchant ID agreed at the beginning of the contract. [required] userId String The user ID associated with the payment. [required] userName String The User name. [required] userEmail String The User e-mail. [required] userContact String The User contact. [required] productId String The ID of the product being purchased. [required] intentType IntentTypeEnum Type of the product. [required] resume ResumeDto [required] products [ProductDto] A list of products associated with the payment. [required] currency String Currency code for the payment. [required] micrositeCurrency String Microsite currency code for the payment. [required] company Company Company making the payment request. [required] microsite Microsite The microsite making the payment request. [required] country String Country where the payment is being made. [required] amount Number The amount to be charged. [required] micrositeAmount Number The microsite amount to be charged. [required] totalAmountService Number Total amount of the service. Obs: This is NOT the value to be charged, it's for visualization purpose that covers all the service's value. [required] successUrl String The success url to redirect the user after a successful payment. [optional] failureUrl String The failure url to redirect the user after a failure on the payment. [optional] manualCapture Boolean If the payment it will be on capture or manual form. [required] expirationDate Date The expiration date of the intent. [optional] widgetExpirationDate Date Widget expiration date of the intent. [optional] cancellationFees [CancellationFeesDto] List of cancellation fees [required] cancellationFeesStrings String List of cancellation fees on plain [required] ideaId String Idea identifier. [required]"},{"location":"CreateIntentRequest/#example","title":"Example","text":"<pre><code>{\n  \"userId\": \"5c6bd4ff-fe65-4899-ac50-af305c27f86d\",\n  \"userEmail\": \"joedoe@email.com\",\n  \"userContact\": \"+351 910 000 000\",\n  \"userName\": \"Joe Doe\",\n  \"cancellationFees\": [\n    {\n      \"limitDate\": \"2000-12-12\",\n      \"price\": \"10.00\"\n    }\n  ],\n  \"cancellationFeesStrings\": [\n    \"Non-refundable.\",\n    \"Refundable until 12-12-2000 with a fee of 10.00.\",\n    \"string ....\"\n  ],\n  \"resume\": {\n    \"owner\": \"Bob Smith\",\n    \"clients\": [\n      {\n        \"name\": \"Name 1\",\n        \"email\": \"email@email.com\",\n        \"dateOfBirth\": \"2000-10-10\",\n        \"children\": false\n      },\n      {\n        \"name\": \"Name 2\",\n        \"email\": \"email2@email.com\",\n        \"dateOfBirth\": \"2000-10-10\",\n        \"children\": false\n      }\n    ]\n  },\n  \"intentType\": \"BOOKING\",\n  \"productId\": \"my-product-id-123\",\n  \"products\": [\n    {\n      \"type\": \"FLIGHT\",\n      \"name\": \"TAP air PORTUGAL\",\n      \"checkin\": \"2024-12-04\",\n      \"importantInfo\": \"Important notes ...\",\n      \"detail\": {\n        \"flightNumber\": \"1234546\",\n        \"departure\": \"2024-12-05\",\n        \"arrival\": \"2024-12-20\",\n        \"departureTime\": \"10:00\",\n        \"arrivalTime\": \"16:00\",\n        \"departureAirport\": \"OPO\",\n        \"arrivalAirport\": \"IST\",\n        \"departureCity\": \"Porto\",\n        \"arrivalCity\": \"Istanbul\",\n        \"departureCountry\": \"Portugal\",\n        \"arrivalCountry\": \"Turkey\",\n        \"baggage\": \"1\",\n        \"duration\": \"4h\"\n      }\n    },\n    {\n      \"type\": \"CRUISE\",\n      \"name\": \"cruise name\",\n      \"checkin\": \"2024-12-15\",\n      \"importantInfo\": \"Important notes ...\",\n      \"detail\": {\n        \"night\": 9,\n        \"roomType\": \"OCEAN_VIEW\",\n        \"regime\": \"all-inclusive\",\n        \"circuit\": [\n          {\n            \"checkin\": \"2024-12-11T11:03:42.501+00:00\",\n            \"checkout\": \"2024-12-11T11:03:42.501+00:00\",\n            \"location\": \"Turkey\"\n          },\n          {\n            \"checkin\": \"2024-12-20T11:03:42.501+00:00\",\n            \"checkout\": \"2024-12-20T11:03:42.501+00:00\",\n            \"location\": \"Turkey\"\n          }\n        ]\n      }\n    },\n    {\n      \"type\": \"TRANSFER\",\n      \"name\": \"BUS 309\",\n      \"location\": \"Istanbul\",\n      \"transport\": \"BUS\",\n      \"checkin\": \"2024-12-20\",\n      \"checkout\": \"2024-12-20\",\n      \"importantInfo\": \"Important notes ...\",\n      \"detail\": {\n        \"provider\": \"Istanbul Transfers\",\n        \"reception\": \"Crowne Plaza: Istanbul - Old City\",\n        \"receptionTime\": \"2024-09-20T16:00\",\n        \"destinationTime\": \"2024-09-20T16:15\",\n        \"destination\": \"Istanbul Airport\"\n      }\n    },\n    {\n      \"type\": \"ACTIVITY\",\n      \"name\": \"Activity's name\",\n      \"location\": \"Istanbul\",\n      \"duration\": \"3h\",\n      \"checkin\": \"2024-12-15\",\n      \"checkout\": \"2024-12-15\",\n      \"importantInfo\": \"Important notes ...\"\n    },\n    {\n      \"type\": \"INSURANCE\",\n      \"name\": \"Seguro XYZ\",\n      \"price\": 12,\n      \"importantInfo\": \"Important notes ...\"\n    },\n    {\n      \"type\": \"EVENT\",\n      \"name\": \"Event's name\",\n      \"location\": \"Istanbul\",\n      \"checkin\": \"2021-12-01\",\n      \"checkout\": \"2021-12-10\",\n      \"importantInfo\": \"Important notes ...\"\n    },\n    {\n      \"type\": \"ACCOMMODATION\",\n      \"name\": \"Hotel's name\",\n      \"location\": \"Istanbul\",\n      \"checkin\": \"2024-12-05\",\n      \"checkout\": \"2024-12-20\",\n      \"importantInfo\": \"Important notes ...\",\n      \"detail\": {\n        \"night\": 9,\n        \"roomType\": \"OCEAN_VIEW\",\n        \"regime\": \"all-inclusive\"\n      }\n    }\n  ],\n  \"company\": \"icligo.pt\",\n  \"currency\": \"EUR\",\n  \"micrositeCurrency\": \"USD\",\n  \"microsite\": \"icligo.pt\",\n  \"country\": \"pt\",\n  \"manualCapture\": true,\n  \"successUrl\": \"https://success.com\",\n  \"failureUrl\": \"https://failure.com\",\n  \"ideaId\": \"15847300\",\n  \"amount\": 100.0,\n  \"micrositeAmount\": 120.0,\n  \"totalAmountService\": 2500.00\n}\n</code></pre>"},{"location":"DetailDto/","title":"DetailDto","text":""},{"location":"DetailDto/#properties","title":"Properties","text":"Name Type Description Notes night Integer Number of nights for the stay. [optional] roomType RoomTypeEnum Room type for accommodation. [optional] regime String Accommodation regime. [optional] flightNumber String Flight number for associated transportation. [optional] departure Date Departure date for the transportation, formatted as a string. [optional] arrival Date Arrival date for the transportation, formatted as a string. [optional] departureTime String Departure time for the flight or transportation. [optional] arrivalTime String Arrival time for the flight or transportation. [optional] departureAirport String Departure airport code. [optional] arrivalAirport String Arrival airport code. [optional] departureCity String City of departure. [optional] arrivalCity String City of arrival. [optional] departureCountry String Country of departure. [optional] arrivalCountry String Country of arrival. [optional] baggage String Baggage details for the transportation. [optional] duration String Duration of the transportation or stay. [optional] provider String Service provider for the product or service. [optional] reception String Reception details. [optional] receptionTime Date Time of reception at the destination. [optional] destinationTime Date Time of arrival at the destination. [optional] destination String Destination details. [optional] circuit CircuitDto Details of the circuit, if applicable. [optional] stopovers StopoversDto Details of stopovers during transportation, if applicable. [optional]"},{"location":"DetailDto/#example","title":"Example","text":"<pre><code>{\n  \"night\": 3,\n  \"roomType\": \"Suite\",\n  \"regime\": \"Half board\",\n  \"flightNumber\": \"FL123\",\n  \"departure\": \"2024-09-24T16:46:42.411Z\",\n  \"arrival\": \"2024-09-24T16:46:42.411Z\",\n  \"departureTime\": \"2024-09-24T16:46:42.411Z\",\n  \"arrivalTime\": \"string\",\n  \"departureAirport\": \"JFK\",\n  \"arrivalAirport\": \"LHR\",\n  \"departureCity\": \"New York\",\n  \"arrivalCity\": \"London\",\n  \"departureCountry\": \"US\",\n  \"arrivalCountry\": \"UK\",\n  \"baggage\": \"string\",\n  \"duration\": \"string\",\n  \"provider\": \"Airline XYZ\",\n  \"reception\": \"string\",\n  \"receptionTime\": \"2024-09-24T16:46:42.411Z\",\n  \"destinationTime\": \"2024-09-24T16:46:42.411Z\",\n  \"destination\": \"string\",\n  \"circuit\": [\n    {\n      \"checkin\": \"2024-09-24T16:46:42.411Z\",\n      \"checkout\": \"2024-09-24T16:46:42.411Z\",\n      \"location\": \"string\"\n    }\n  ],\n  \"stopovers\": [\n    {\n      \"departure\": \"2024-09-24T16:46:42.411Z\",\n      \"arrival\": \"2024-09-24T16:46:42.411Z\",\n      \"departureTime\": \"2024-09-24T16:46:42.411Z\",\n      \"arrivalTime\": \"2024-09-24T16:46:42.411Z\",\n      \"departureAirport\": \"string\",\n      \"arrivalAirport\": \"string\",\n      \"departureCity\": \"string\",\n      \"arrivalCity\": \"string\",\n      \"departureCountry\": \"string\",\n      \"arrivalCountry\": \"string\",\n      \"duration\": \"2H\"\n    }\n  ]\n}\n</code></pre>"},{"location":"ErrorPayloadMessage/","title":"ErrorPayloadMessage","text":""},{"location":"ErrorPayloadMessage/#properties","title":"Properties","text":"Name Type Description Notes timestamp long Timestamp of when the error occurred. - status int HTTP status code of the error. - error String HTTP description of the error. - message String Detailed error message. - path String The path of the endpoint where the error occurred. -"},{"location":"ErrorPayloadMessage/#example","title":"Example","text":"<pre><code>{\n  \"timestamp\": 1732724287772,\n  \"status\": 400,\n  \"error\": \"Bad Request\",\n  \"message\": \"Invalid request payload. Reason(s): {'example[0].example':'Cannot be null'}\",\n  \"path\": \"/payments/create-payment-intent\"\n}\n</code></pre>"},{"location":"ExternalCancelPaymentResponse/","title":"ExternalCancelPaymentResponse","text":""},{"location":"ExternalCancelPaymentResponse/#properties","title":"Properties","text":"Name Type Description Notes date long Timestamp of cancellation. -"},{"location":"ExternalCancelPaymentResponse/#example","title":"Example","text":"<pre><code>{\n  \"date\": 1732724287772\n}\n</code></pre>"},{"location":"ExternalConfirmPaymentRequest/","title":"ExternalConfirmPaymentRequest","text":""},{"location":"ExternalConfirmPaymentRequest/#properties","title":"Properties","text":"Name Type Description Notes amount Number Amount to be captured. the currency is associated to the intent's currency. [required] description String A brief description of the transaction or context for the amount information. [optional]"},{"location":"ExternalConfirmPaymentRequest/#example","title":"Example","text":"<pre><code>{\n  \"amount\": 100,\n  \"description\": \"Captured by client\"\n}\n</code></pre>"},{"location":"ExternalPaymentDto/","title":"ExternalPaymentDto","text":""},{"location":"ExternalPaymentDto/#properties","title":"Properties","text":"Name Type Description Notes id String Unique identifier for the payment intent. - clientId String Unique client identifier. - userId String User/Customer identifier who initiated the payment. - service String Service associated with the payment. - serviceDescription String Detailed description of the service. - productId String Product identifier related to the payment. - intentType IntentTypeEnum Type of the product for which the intent is being made. - resume ResumeDto Resume of the service. - products ProductDto List of products associated with this payment. - company String Company associated with the payment. - microsite String Microsite used for making the payment. - country String Country where the payment is being made. - currency String Currency code for the payment. Must respect the ISO 4217 and be upper case. - createdBy String Username of the person who created the payment. - state StateEnum Current state of the payment. - amount Number Total amount of the order. - totalAmountService Number Total amount of the service. Obs: This is NOT the value to be charged, it's for visualization purpose that covers all the service's value. - capturedAmount Number Amount captured. - authorizedAmount Number Amount authorized to be captured. - refundedAmount Number Amount refunded. - manualCapture Boolean If the payment is on capture or manual form. - captureDetails CaptureDetail Details of the captures made for the payment. - refundDetails RefundDetail Details of any refunds made for the payment. - expirationDate Date Expiration date of the payment. - widgetExpirationDate Date Widget expiration date of the payment. - successUrl String The success url to redirect the user after a successful payment. - failureUrl String The failure url to redirect the user after a failure on the payment. - testMode Boolean If the payment it was created using a account. -"},{"location":"ExternalPaymentDto/#example","title":"Example","text":"<pre><code>{\n  \"id\": \"b91c35cc-db74-4663-a491-bed750686faa\",\n  \"clientId\": \"travel-c-app-test\",\n  \"userId\": \"5c6bd4ff-fe65-4899-ac50-af305c27f86d\",\n  \"productId\": \"my-product-id-123\",\n  \"intentType\": \"BOOKING\",\n  \"resume\": {\n    \"owner\": \"Bob Smith\",\n    \"clients\": [\n      {\n        \"name\": \"Name 1\",\n        \"email\": \"email@email.com\",\n        \"dateOfBirth\": \"2000-10-10\",\n        \"children\": false\n      },\n      {\n        \"name\": \"Name 2\",\n        \"email\": \"email2@email.com\",\n        \"dateOfBirth\": \"2000-10-10\",\n        \"children\": false\n      }\n    ]\n  },\n  \"products\": [\n    {\n      \"type\": \"FLIGHT\",\n      \"name\": \"TAP air PORTUGAL\",\n      \"checkin\": \"2024-12-04\",\n      \"detail\": {\n        \"flightNumber\": \"1234546\",\n        \"departure\": \"2024-12-05\",\n        \"arrival\": \"2024-12-20\",\n        \"departureTime\": \"10:00\",\n        \"arrivalTime\": \"16:00\",\n        \"departureAirport\": \"OPO\",\n        \"arrivalAirport\": \"IST\",\n        \"departureCity\": \"Porto\",\n        \"arrivalCity\": \"Istanbul\",\n        \"departureCountry\": \"Portugal\",\n        \"arrivalCountry\": \"Turkey\",\n        \"baggage\": \"1\",\n        \"duration\": \"4h\"\n      },\n      \"importantInfo\": \"Important notes ...\"\n    },\n    {\n      \"type\": \"CRUISE\",\n      \"name\": \"cruise name\",\n      \"checkin\": \"2024-12-15\",\n      \"detail\": {\n        \"night\": 9,\n        \"roomType\": \"OCEAN_VIEW\",\n        \"regime\": \"all-inclusive\",\n        \"circuit\": [\n          {\n            \"checkin\": \"2024-12-11T11:03:42.501+00:00\",\n            \"checkout\": \"2024-12-11T11:03:42.501+00:00\",\n            \"location\": \"Turkey\"\n          },\n          {\n            \"checkin\": \"2024-12-20T11:03:42.501+00:00\",\n            \"checkout\": \"2024-12-20T11:03:42.501+00:00\",\n            \"location\": \"Turkey\"\n          }\n        ]\n      },\n      \"importantInfo\": \"Important notes ...\"\n    },\n    {\n      \"type\": \"TRANSFER\",\n      \"name\": \"BUS 309\",\n      \"location\": \"Istanbul\",\n      \"transport\": \"BUS\",\n      \"checkin\": \"2024-12-20\",\n      \"checkout\": \"2024-12-20\",\n      \"detail\": {\n        \"provider\": \"Istanbul Transfers\",\n        \"reception\": \"Crowne Plaza: Istanbul - Old City\",\n        \"receptionTime\": \"2024-09-20T16:00\",\n        \"destinationTime\": \"2024-09-20T16:15\",\n        \"destination\": \"Istanbul Airport\"\n      },\n      \"importantInfo\": \"Important notes ...\"\n    },\n    {\n      \"type\": \"ACTIVITY\",\n      \"name\": \"Activity's name\",\n      \"location\": \"Istanbul\",\n      \"duration\": \"3h\",\n      \"checkin\": \"2024-12-15\",\n      \"checkout\": \"2024-12-15\",\n      \"importantInfo\": \"Important notes ...\"\n    },\n    {\n      \"type\": \"INSURANCE\",\n      \"name\": \"Seguro XYZ\",\n      \"price\": 12,\n      \"importantInfo\": \"Important notes ...\"\n    },\n    {\n      \"type\": \"EVENT\",\n      \"name\": \"Event's name\",\n      \"location\": \"Istanbul\",\n      \"checkin\": \"2021-12-01\",\n      \"checkout\": \"2021-12-10\",\n      \"importantInfo\": \"Important notes ...\"\n    },\n    {\n      \"type\": \"ACCOMMODATION\",\n      \"name\": \"Hotel's name\",\n      \"location\": \"Istanbul\",\n      \"checkin\": \"2024-12-05\",\n      \"checkout\": \"2024-12-20\",\n      \"detail\": {\n        \"night\": 9,\n        \"roomType\": \"OCEAN_VIEW\",\n        \"regime\": \"all-inclusive\"\n      },\n      \"importantInfo\": \"Important notes ...\"\n    }\n  ],\n  \"company\": \"icligo.pt\",\n  \"microsite\": \"icligo.pt\",\n  \"country\": \"pt\",\n  \"currency\": \"EUR\",\n  \"state\": \"CREATED\",\n  \"amount\": 100.0,\n  \"totalAmountService\": 2500.00,\n  \"capturedAmount\": 0,\n  \"authorizedAmount\": 0,\n  \"refundedAmount\": 0,\n  \"manualCapture\": true,\n  \"captureDetails\": [],\n  \"refundDetails\": [],\n  \"successUrl\": \"https://success.com\",\n  \"failureUrl\": \"https://failure.com\",\n  \"testMode\": true\n}\n</code></pre>"},{"location":"IntentTypeEnum/","title":"IntentTypeEnum","text":"<ul> <li><code>BOOKING</code></li> <li><code>SUBSCRIPTION</code></li> <li><code>GIFT</code> </li> <li><code>EVENT</code> </li> <li><code>SERVICE</code> </li> </ul>"},{"location":"MicrositeEnum/","title":"Microsite","text":"<ul> <li><code>ICLIGO_PT</code></li> <li><code>ICLIGO_ES</code></li> <li><code>ICLIGO_COM</code></li> </ul>"},{"location":"ProductDto/","title":"ProductDto","text":""},{"location":"ProductDto/#properties","title":"Properties","text":"Name Type Description Notes type ProductTypeEnum Type of the product. [required] name String Name of the product. [required] location String Location of the product. [required for: ACCOMMODATION, TRANSFER, ACTIVITY, and EVENT] duration String Duration of the product/service. [required for: ACTIVITY] code String Unique product code. [optional] transport TransportEnum Type of transport associated with the product, if applicable. [required for: TRANSFER] checkin Date Check-in date of the product, formatted as a string. [required for: FLIGHT, ACCOMMODATION, CRUISE, TRANSFER, ACTIVITY, and EVENT] checkout Date Check-out date of the product, formatted as a string. [required for: ACCOMMODATION, TRANSFER, ACTIVITY, and EVENT] date Date Date of the product activity or service, formatted as a string. [optional] price Number Price of the product. [required for: INSURANCE] detail DetailDto [required for: FLIGHT, ACCOMMODATION, CRUISE, and TRANSFER] importantInfo String String with Important information in plain text. [required]"},{"location":"ProductDto/#examples-of-products","title":"Examples of products","text":"FLIGHT <pre><code>{\n  \"type\": \"FLIGHT\",\n  \"name\": \"TAP air PORTUGAL\",\n  \"checkin\": \"2024-12-04\",\n  \"importantInfo\": \"Important notes ...\",\n  \"detail\": {\n    \"flightNumber\": \"1234546\",\n    \"departure\": \"2024-12-05\",\n    \"arrival\": \"2024-12-20\",\n    \"departureTime\": \"10:00\",\n    \"arrivalTime\": \"16:00\",\n    \"departureAirport\": \"OPO\",\n    \"arrivalAirport\": \"IST\",\n    \"departureCity\": \"Porto\",\n    \"arrivalCity\": \"Istanbul\",\n    \"departureCountry\": \"Portugal\",\n    \"arrivalCountry\": \"Turkey\",\n    \"baggage\": \"1\",\n    \"duration\": \"4h\"\n  }\n}\n</code></pre> ACCOMMODATION <pre><code>{\n  \"type\": \"ACCOMMODATION\",\n  \"name\": \"Hotel's name\",\n  \"location\": \"Istanbul\",\n  \"checkin\": \"2024-12-05\",\n  \"checkout\": \"2024-12-20\",\n  \"importantInfo\": \"Important notes ...\",\n  \"detail\": {\n    \"night\": 9,\n    \"roomType\": \"OCEAN_VIEW\",\n    \"regime\": \"all-inclusive\"\n  }\n}\n</code></pre> CRUISE <pre><code>{\n  \"type\": \"CRUISE\",\n  \"name\": \"cruise name\",\n  \"checkin\": \"2024-12-15\",\n  \"importantInfo\": \"Important notes ...\",\n  \"detail\": {\n    \"night\": 9,\n    \"roomType\": \"OCEAN_VIEW\",\n    \"regime\": \"all-inclusive\",\n    \"circuit\": [\n      {\n        \"checkin\": \"2024-12-11T11:03:42.501+00:00\",\n        \"checkout\": \"2024-12-11T11:03:42.501+00:00\",\n        \"location\": \"Turkey\"\n      },\n      {\n        \"checkin\": \"2024-12-20T11:03:42.501+00:00\",\n        \"checkout\": \"2024-12-20T11:03:42.501+00:00\",\n        \"location\": \"Turkey\"\n      }\n    ]\n  }\n}\n</code></pre> TRANSFER <pre><code>{\n  \"type\": \"TRANSFER\",\n  \"name\": \"BUS 309\",\n  \"location\": \"Istanbul\",\n  \"transport\": \"BUS\",\n  \"checkin\": \"2024-12-20\",\n  \"checkout\": \"2024-12-20\",\n  \"importantInfo\": \"Important notes ...\",\n  \"detail\": {\n    \"provider\": \"Istanbul Transfers\",\n    \"reception\": \"Crowne Plaza: Istanbul - Old City\",\n    \"receptionTime\": \"2024-09-20T16:00\",\n    \"destinationTime\": \"2024-09-20T16:15\",\n    \"destination\": \"Istanbul Airport\"\n  }\n}\n</code></pre> ACTIVITY <pre><code>{\n  \"type\": \"ACTIVITY\",\n  \"name\": \"Activity's name\",\n  \"location\": \"Istanbul\",\n  \"duration\": \"3h\",\n  \"checkin\": \"2024-12-15\",\n  \"checkout\": \"2024-12-15\",\n  \"importantInfo\": \"Important notes ...\"\n}\n</code></pre> INSURANCE <pre><code>{\n  \"type\": \"INSURANCE\",\n  \"name\": \"Insurance's Name\",\n  \"price\": 12,\n  \"importantInfo\": \"Important notes ...\"\n}\n</code></pre> EVENT <pre><code>{\n  \"type\": \"EVENT\",\n  \"name\": \"Event's name\",\n  \"location\": \"Istanbul\",\n  \"checkin\": \"2021-12-01\",\n  \"checkout\": \"2021-12-10\",\n  \"importantInfo\": \"Important notes ...\"\n}\n</code></pre>"},{"location":"ProductTypeEnum/","title":"ProductTypeEnum","text":"<ul> <li><code>ACCOMMODATION</code> </li> <li><code>FLIGHT</code> </li> <li><code>PACKAGE</code> </li> <li><code>INSURANCE</code> </li> <li><code>CRUISE</code> </li> <li><code>ACTIVITY</code> </li> <li><code>TRANSFER</code> </li> </ul>"},{"location":"RefundDetail/","title":"RefundDetail","text":""},{"location":"RefundDetail/#properties","title":"Properties","text":"Name Type Description Notes id String Unique identifier for the transaction or record. - captureId String Identifier for the specific capture associated with the transaction. If applicable. - createTime long The timestamp when the refund was created.                      - description String A brief description providing additional context about the capture. - amount AmountInfo Detailed information about the refund. -"},{"location":"RefundDetail/#example","title":"Example","text":"<pre><code>{\n  \"id\": \"4444d000-659b-a21d-974d-ba3b489d50d9\",\n  \"captureId\": \"66f2df95-659b-a21d-974d-ba3b489d50d9\",\n  \"createTime\": 1727193013453,\n  \"description\": \"Refund Description\",\n  \"amount\": {\n    \"currency\": \"EUR\",\n    \"value\": 10.0\n  }\n}\n</code></pre>"},{"location":"ResumeDto/","title":"ResumeDto","text":""},{"location":"ResumeDto/#properties","title":"Properties","text":"Name Type Description Notes description String Description of the product or service. [optional] reference String Reference ID for the product or service. [optional] owner String Owner or responsible party for the transaction. [required] email String Owner's contact email address. [optional] currency String Currency code for the payment. Must respect the ISO 4217 and be upper case. [optional] amount Number Total amount of the transaction. [optional] checkin Date Check-in date for the booking, formatted as a string. [optional] checkout Date Check-out date for the booking, formatted as a string. [optional] clients ClientDto List of clients involved in the transaction. [optional]"},{"location":"ResumeDto/#example","title":"Example","text":"<pre><code>{\n  \"owner\": \"Bob Smith\",\n  \"reference\": \"REF901\",\n  \"email\": \"bobsmith@email.com\",\n  \"currency\": \"EUR\",\n  \"amount\": 10,\n  \"checkin\": \"2024-09-24T16:46:42.411Z\",\n  \"checkout\": \"2024-09-24T16:46:42.411Z\",\n  \"clients\": [\n    {\n      \"name\": \"Nome 1\",\n      \"email\": \"email@email.com\",\n      \"dateOfBirth\": \"2000-10-10\",\n      \"children\": false\n    },\n    {\n      \"name\": \"Nome 2\",\n      \"email\": \"email2@email.com\",\n      \"dateOfBirth\": \"2000-10-10\",\n      \"children\": false\n    }\n  ]\n}\n</code></pre>"},{"location":"RoomTypeEnum/","title":"RoomTypeEnum","text":"<ul> <li><code>INSIDE</code> </li> <li><code>OCEAN_VIEW</code> </li> <li><code>BALCONY</code> </li> <li><code>SUITE</code></li> </ul>"},{"location":"StateEnum/","title":"StateEnum","text":"<ul> <li><code>CREATED</code></li> <li><code>PROCESSING</code></li> <li><code>AUTHORIZED</code></li> <li><code>COMPLETED</code></li> <li><code>CANCELED</code></li> <li><code>FAILED</code></li> <li><code>REFUNDED</code></li> </ul>"},{"location":"StopoversDto/","title":"StopoversDto","text":""},{"location":"StopoversDto/#properties","title":"Properties","text":"Name Type Description Notes departure Date The date and time when the departure occurs. [optional] arrival Date The date and time when the arrival occurs. [optional] departureTime String The time of departure in a specified format (e.g., HH:MM). [optional] arrivalTime String The time of arrival in a specified format (e.g., HH:MM). [optional] departureAirport String The airport from which the journey departs. [optional] arrivalAirport String The airport at which the journey arrives. [optional] departureCity String The city from which the journey departs. [optional] arrivalCity String The city at which the journey arrives. [optional] departureCountry String The country from which the journey departs. [optional] arrivalCountry String The country at which the journey arrives. [optional] duration String The total duration of the journey, typically expressed in hours and minutes. [optional]"},{"location":"StopoversDto/#example","title":"Example","text":"<pre><code>{\n  \"departure\": \"2024-09-24T16:46:42.411Z\",\n  \"arrival\": \"2024-09-24T16:46:42.411Z\",\n  \"departureTime\": \"2024-09-24T16:46:42.411Z\",\n  \"arrivalTime\": \"2024-09-24T16:46:42.411Z\",\n  \"departureAirport\": \"string\",\n  \"arrivalAirport\": \"string\",\n  \"departureCity\": \"string\",\n  \"arrivalCity\": \"string\",\n  \"departureCountry\": \"string\",\n  \"arrivalCountry\": \"string\",\n  \"duration\": \"2H\"\n}\n</code></pre>"},{"location":"TransportEnum/","title":"TransportEnum","text":"<ul> <li><code>CAR</code> </li> <li><code>BUS</code> </li> <li><code>TRAIN</code> </li> </ul>"},{"location":"cards/","title":"Test Payment Methods","text":"<p>This page provides instructions on testing different payment methods in a controlled environment. Each method is categorized based on its flow (inline form or external redirection).</p>"},{"location":"cards/#payment-methods","title":"Payment Methods","text":""},{"location":"cards/#1-inline-form-payment","title":"1. Inline Form Payment","text":"<p>For payment methods where card details are entered directly in an inline form, use the following test cards:</p> 3D Secure usage Outcome Test Card Number 3DS Required OK 4000 0000 0000 3220 3DS Required Declined 4000 0084 0000 1629 3DS Required Error 4000 0084 0000 1280 3DS Supported OK 4000 0000 0000 3220 3DS Supported Error 4000 0000 0000 3097 3DS Supported Unenrolled 4242 4242 4242 4242 3DS Not supported - 3782 822463 10005 <p>These cards simulate different scenarios for Stripe integration.</p>"},{"location":"cards/#2-external-payment-redirect","title":"2. External Payment Redirect","text":"<p>For payment methods that redirect to an external page (e.g., a new tab or window), use the following guidelines:</p>"},{"location":"cards/#viva-wallet","title":"Viva Wallet","text":"<ol> <li>When redirected, use Viva Wallet's test environment.</li> <li>Follow their documentation for test credentials and flows: Viva Wallet Test Cards</li> </ol>"},{"location":"cards/#revolut","title":"Revolut","text":"<ol> <li>When redirected, use Revolut's sandbox environment.</li> <li>Follow their guidelines for simulating transactions: Revolut Test Cards</li> </ol>"},{"location":"cards/#paypal","title":"PayPal","text":"<ol> <li>When redirected, log in using the following sandbox test credentials:<ul> <li>Email: <code>sb-74kmc30573880@personal.example.com</code></li> <li>Password: <code>Z^rbNKj5</code></li> </ul> </li> <li>Approve the transaction to complete the test payment.</li> </ol>"},{"location":"cards/#notes","title":"Notes:","text":"<ol> <li>These test payment methods and cards must only be used in a test environment.</li> <li>Ensure your system is configured to handle redirections correctly for external payments.</li> <li>Inline form integrations like Stripe should validate card data securely and comply with PCI standards.</li> <li>Misuse of test credentials or cards in production environments may result in account suspension or violations.</li> </ol>"},{"location":"dtos/","title":"DTOs","text":"<p>The following section defines the Data Transfer Objects (DTOs) used in our system. DTOs are simple objects designed to carry data between processes without containing any business logic. These objects ensure efficient data exchange between different layers or services while keeping the system modular and maintainable. Below is a list of the DTOs and their respective fields, which are used throughout the application.</p>"},{"location":"dtos/#amountinfo","title":"AmountInfo","text":"<p>Properties</p> Name Type Description Notes currency String Currency code for the payment. Must respect the ISO 4217 and be upper case. - value Number The total amount of the transaction in the specified currency. -"},{"location":"dtos/#cancellationfeesdto","title":"CancellationFeesDto","text":"<p>Properties</p> Name Type Description Notes limitDate Date Limit date for cancellation, formatted as a string \"yyyy-MM-dd\". [required] price Number Price of the cancellation. [required]"},{"location":"dtos/#capturedetail","title":"CaptureDetail","text":"<p>Properties</p> Name Type Description Notes id String Unique identifier for the transaction or record. - captureTime long The timestamp when the transaction was captured. - description String Description of the capture. - amount AmountInfo Detailed information about the captured amount, including currency and value. -"},{"location":"dtos/#circuitdto","title":"CircuitDto","text":"<p>Properties</p> Name Type Description Notes checkin Date The date and time when the check-in occurs. [required] checkout Date The date and time when the check-out occurs. [required] location String The location associated with the check-in and check-out. [optional]"},{"location":"dtos/#clientdto","title":"ClientDto","text":"<p>Properties</p> Name Type Description Notes name String Name of the client. [required] email String Client's email address. [optional] dateOfBirth Date Client's date of birth, formatted as a string. [optional] children Boolean Indicates if the client is a child. [optional]"},{"location":"dtos/#confirmpaymentresponse","title":"ConfirmPaymentResponse","text":"<p>Properties</p> Name Type Description Notes date Date The date when the event or transaction occurred. - capturedAmountInfo AmountInfo Details about the amount that had been captured. - description String A brief description providing additional context or details if applicable. - captures CaptureDetail Information about individual captures related to the transaction. -"},{"location":"dtos/#createintentrequest","title":"CreateIntentRequest","text":"<p>Properties</p> Name Type Description Notes clientId String Unique client identifier. Identifies the client that is making the request, in this case it'syour company/merchant ID agreed at the beginning of the contract. [required] userId String The user ID associated with the payment. [required] userName String The User name. [required] userEmail String The User e-mail. [required] userContact String The User contact. [required] productId String The ID of the product being purchased. [required] intentType IntentTypeEnum Type of the product. [required] resume ResumeDto [required] products [ProductDto] A list of products associated with the payment. [required] currency String Currency code for the payment. [required] company String Company making the payment request. [required] microsite String The microsite making the payment request. [required] country String Country where the payment is being made. [required] amount Number The amount to be charged. [required] totalAmountService Number Total amount of the service. Obs: This is NOT the value to be charged, it's for visualization purpose that covers all the service's value. [required] successUrl String The success url to redirect the user after a successful payment. [optional] failureUrl String The failure url to redirect the user after a failure on the payment. [optional] manualCapture Boolean If the payment it will be on capture or manual form. [required] expirationDate Date The expiration date of the intent. [optional] cancellationFees [CancellationFeesDto] List of cancellation fees [required] cancellationFeesStrings String List of cancellation fees on plain [required] ideaId String Idea identifier. [required]"},{"location":"dtos/#detaildto","title":"DetailDto","text":"<p>Properties</p> Name Type Description Notes night Integer Number of nights for the stay. [optional] roomType RoomTypeEnum Room type for accommodation. [optional] regime String Accommodation regime. [optional] flightNumber String Flight number for associated transportation. [optional] departure Date Departure date for the transportation, formatted as a string. [optional] arrival Date Arrival date for the transportation, formatted as a string. [optional] departureTime String Departure time for the flight or transportation. [optional] arrivalTime String Arrival time for the flight or transportation. [optional] departureAirport String Departure airport code. [optional] arrivalAirport String Arrival airport code. [optional] departureCity String City of departure. [optional] arrivalCity String City of arrival. [optional] departureCountry String Country of departure. [optional] arrivalCountry String Country of arrival. [optional] baggage String Baggage details for the transportation. [optional] duration String Duration of the transportation or stay. [optional] provider String Service provider for the product or service. [optional] reception String Reception details. [optional] receptionTime Date Time of reception at the destination. [optional] destinationTime Date Time of arrival at the destination. [optional] destination String Destination details. [optional] circuit CircuitDto Details of the circuit, if applicable. [optional] stopovers StopoversDto Details of stopovers during transportation, if applicable. [optional]"},{"location":"dtos/#externalcancelpaymentresponse","title":"ExternalCancelPaymentResponse","text":"<p>Properties</p> Name Type Description Notes date long Timestamp of cancellation. -"},{"location":"dtos/#externalconfirmpaymentrequest","title":"ExternalConfirmPaymentRequest","text":"<p>Properties</p> Name Type Description Notes amount Number Amount to be captured. [required] description String A brief description of the transaction or context for the amount information. [optional]"},{"location":"dtos/#externalpaymentdto","title":"ExternalPaymentDto","text":"<p>Properties</p> Name Type Description Notes id String Unique identifier for the payment intent. - clientId String Unique client identifier. - userId String User/Customer identifier who initiated the payment. - service String Service associated with the payment. - serviceDescription String Detailed description of the service. - productId String Product identifier related to the payment. - intentType IntentTypeEnum Type of the product for which the intent is being made. - resume ResumeDto Resume of the service. - products ProductDto List of products associated with this payment. - company String Company associated with the payment. - microsite String Microsite used for making the payment. - country String Country where the payment is being made. - currency String Currency code for the payment. Must respect the ISO 4217 and be upper case. - createdBy String Username of the person who created the payment. - state StateEnum Current state of the payment. - amount Number Total amount of the order. - totalAmountService Number Total amount of the service. Obs: This is NOT the value to be charged, it's for visualization purpose that covers all the service's value. - capturedAmount Number Amount captured. - authorizedAmount Number Amount authorized to be captured. - refundedAmount Number Amount refunded. - manualCapture Boolean If the payment is on capture or manual form. - captureDetails CaptureDetail Details of the captures made for the payment. - refundDetails RefundDetail Details of any refunds made for the payment. - expirationDate Date Expiration date of the payment. - successUrl String The success url to redirect the user after a successful payment. - failureUrl String The failure url to redirect the user after a failure on the payment. - testMode Boolean If the payment it was created using a account. -"},{"location":"dtos/#productdto","title":"ProductDto","text":"<p>Properties</p> Name Type Description Notes type ProductTypeEnum Type of the product. [required] name String Name of the product. [required] location String Location of the product. [required for: ACCOMMODATION, TRANSFER, ACTIVITY, and EVENT] duration String Duration of the product/service. [required for: ACTIVITY] code String Unique product code. [optional] transport TransportEnum Type of transport associated with the product, if applicable. [required for: TRANSFER] checkin Date Check-in date of the product, formatted as a string. [required for: FLIGHT, ACCOMMODATION, CRUISE, TRANSFER, ACTIVITY, and EVENT] checkout Date Check-out date of the product, formatted as a string. [required for: ACCOMMODATION, TRANSFER, ACTIVITY, and EVENT] date Date Date of the product activity or service, formatted as a string. [optional] price Number Price of the product. [required for: INSURANCE] detail DetailDto [required for: FLIGHT, ACCOMMODATION, CRUISE, and TRANSFER] importantInfo String String with Important information in plain text. [required]"},{"location":"dtos/#refunddetail","title":"RefundDetail","text":"<p>Properties</p> Name Type Description Notes id String Unique identifier for the transaction or record. - captureId String Identifier for the specific capture associated with the transaction. If applicable. - createTime long The timestamp when the refund was created.                      - description String A brief description providing additional context about the capture. - amount AmountInfo Detailed information about the refund. -"},{"location":"dtos/#resumedto","title":"ResumeDto","text":"<p>Properties</p> Name Type Description Notes description String Description of the product or service. [optional] reference String Reference ID for the product or service. [optional] owner String Owner or responsible party for the transaction. [required] email String Owner's contact email address. [optional] currency String Currency code for the payment. Must respect the ISO 4217 and be upper case. [optional] amount Number Total amount of the transaction. [optional] checkin Date Check-in date for the booking, formatted as a string. [optional] checkout Date Check-out date for the booking, formatted as a string. [optional] clients ClientDto List of clients involved in the transaction. [optional]"},{"location":"dtos/#stopoversdto","title":"StopoversDto","text":"<p>Properties</p> Name Type Description Notes departure Date The date and time when the departure occurs. [optional] arrival Date The date and time when the arrival occurs. [optional] departureTime String The time of departure in a specified format (e.g., HH:MM). [optional] arrivalTime String The time of arrival in a specified format (e.g., HH:MM). [optional] departureAirport String The airport from which the journey departs. [optional] arrivalAirport String The airport at which the journey arrives. [optional] departureCity String The city from which the journey departs. [optional] arrivalCity String The city at which the journey arrives. [optional] departureCountry String The country from which the journey departs. [optional] arrivalCountry String The country at which the journey arrives. [optional] duration String The total duration of the journey, typically expressed in hours and minutes. [optional]"},{"location":"dtos/#errorpayloadmessage","title":"ErrorPayloadMessage","text":"<p>Properties</p> Name Type Description Notes timestamp long Timestamp of when the error occurred. - status int HTTP status code of the error. - error String HTTP description of the error. - message String Detailed error message. - path String The path of the endpoint where the error occurred. -"},{"location":"dtos/#enums","title":"Enums","text":""},{"location":"dtos/#stateenum","title":"StateEnum","text":"<ul> <li><code>CREATED</code></li> <li><code>PROCESSING</code></li> <li><code>AUTHORIZED</code></li> <li><code>COMPLETED</code></li> <li><code>CANCELED</code></li> <li><code>FAILED</code></li> <li><code>REFUNDED</code></li> </ul>"},{"location":"dtos/#producttypeenum","title":"ProductTypeEnum","text":"<ul> <li><code>ACCOMMODATION</code></li> <li><code>FLIGHT</code></li> <li><code>PACKAGE</code></li> <li><code>INSURANCE</code></li> <li><code>CRUISE</code></li> <li><code>ACTIVITY</code></li> <li><code>TRANSFER</code></li> </ul>"},{"location":"dtos/#intenttypeenum","title":"IntentTypeEnum","text":"<ul> <li><code>BOOKING</code></li> <li><code>SUBSCRIPTION</code></li> <li><code>GIFT</code></li> <li><code>EVENT</code></li> <li><code>SERVICE</code></li> </ul>"},{"location":"dtos/#roomtypeenum","title":"RoomTypeEnum","text":"<ul> <li><code>INSIDE</code></li> <li><code>OCEAN_VIEW</code></li> <li><code>BALCONY</code></li> <li><code>SUITE</code></li> </ul>"},{"location":"dtos/#transportenum","title":"TransportEnum","text":"<ul> <li><code>CAR</code></li> <li><code>BUS</code></li> <li><code>TRAIN</code> </li> </ul>"},{"location":"intro/","title":"Introduction","text":""},{"location":"intro/#introduction-to-payment-process-flow","title":"Introduction to Payment Process Flow","text":"<p>This document outlines the steps involved in a typical payment transaction using the iCliGo payment gateway.</p> <p>The diagram bellow represents the high-level sequence diagram of the payment's flow.</p> <p></p>"},{"location":"intro/#step-1-creating-a-payment-intent","title":"Step 1: Creating a Payment Intent","text":"<p>The payment process begins with the creation of a payment intent (Step 1 in the sequence diagram). In this request, you provide key details such as the payment amount, currency, capture mode (manual or automatic), product information, the time window that the customer it is allowed to complete the payment, and any other necessary data. This request communicates your intent to initiate the transaction with the iCliGo gateway.</p> <p>Once your request is received, the system processes it and responds with a status code:</p> <ul> <li>A 200 OK response confirms that the payment intent has been successfully created, giving you the assurance that everything is correctly set up, allowing you to proceed with the next steps.</li> <li>If you receive errors such as 400, 401, or 403, this indicates an issue with the request (e.g., missing parameters, invalid credentials), and you will need to correct it before continuing.</li> </ul>"},{"location":"intro/#step-2-presenting-the-payment-interface","title":"Step 2: Presenting the Payment Interface","text":"<p>After successfully creating the payment intent, the next step is to present the payment interface to the customer so they can complete the transaction. At this stage, you have two options for customer interaction:</p> <ol> <li> <p>iCliGo Checkout Widget</p> <ul> <li>You can embed iCliGo\u2019s Checkout Widget directly on your web page (Step 3). This allows the customer to interact with the payment interface without leaving your site. The widget will handle all necessary steps, such as payment method selection and transaction confirmation, all within your branded environment. Your only responsibility is to instantiate the widget.</li> </ul> </li> <li> <p>iCliGo Checkout Standalone Page</p> <ul> <li>Alternatively, you can redirect the customer to iCliGo\u2019s standalone checkout page. This is a fully hosted page managed by iCliGo, where all payment-related interactions are handled externally. The main difference is that the customer is redirected to a new URL where all checkout operations take place.</li> </ul> </li> </ol> <p>Note</p> <p>Regardless of whether you choose the widget or the standalone page, the customer can be redirected to a success or failure URL, as specified in the initial payment creation request.</p>"},{"location":"intro/#step-3-managing-customer-interactions-and-webhooks","title":"Step 3: Managing Customer Interactions and Webhooks","text":"<p>Once the customer reaches the checkout interface (via the widget or the standalone page), they will interact with the payment options (Steps 4-7). During this phase, you simply need to wait for the relevant webhooks that notify you of the payment\u2019s progress, based on the customer's actions. These webhooks provide updates on key payment events:</p>"},{"location":"intro/#manual-capture","title":"Manual Capture","text":"<p>If you choose manual capture at the creation of payment intent, you maintain control over when the payment is finalized after the customer makes the payment. You will receive the following webhook notifications in this process:</p> <ul> <li>PAYMENT_AUTHORIZED Webhook: This indicates that the payment has been authorized. From here, you have two options:<ul> <li>Cancel the payment: If you decide to cancel the payment, it will be voided, and you'll receive:<ul> <li>PAYMENT_CANCELED Webhook: This confirms the payment has been successfully canceled.</li> </ul> </li> <li>Capture the payment: If you choose to capture the payment, the funds will be secured, and you'll receive:<ul> <li>PAYMENT_COMPLETED Webhook: This confirms that the payment has been successfully captured and completed.</li> </ul> </li> </ul> </li> </ul>"},{"location":"intro/#automatic-capture","title":"Automatic Capture","text":"<p>For automatic capture, you do not need to manually control the capture process. Therefore, you will not receive a <code>PAYMENT_AUTHORIZED</code> webhook. Instead, depending on the transaction outcome, you will receive either:</p> <ul> <li>PAYMENT_COMPLETED Webhook: If the customer successfully completes the payment.</li> <li>PAYMENT_CANCELED Webhook: If the payment is canceled due to an error or expiration of the time window defined to the payment.</li> </ul>"},{"location":"intro/#step-4-refunding-a-payment-intent","title":"Step 4: Refunding a Payment Intent","text":"<p>Although not represented in the sequence diagram, it is possible to request a refund for a payment intent. Refunds are only allowed for payments in the <code>COMPLETED</code> or <code>REFUNDED</code> states.</p> <p>Multiple refunds are supported, but the total refunded amount cannot exceed the original captured amount. Once the first refund is processed, the payment will assume the <code>REFUNDED</code> state, which implicitly indicates a <code>COMPLETED</code> status since refunds are only allowed for completed payments, and for that reason it's possible to make another refund over a <code>REFUNDED</code> state payment.</p>"},{"location":"intro/#summary","title":"Summary","text":"<p>After creating the payment intent, your role is to choose between embedding the widget or redirecting to the standalone page to present the checkout interface. Once the customer completes their interactions with the payment UI, iCliGo will notify you of the transaction's outcome through webhooks, allowing you to take appropriate actions based on the payment\u2019s status.</p>"},{"location":"intro/#payment-state-lifecycle","title":"Payment State Lifecycle","text":"<p>The state machine diagram below provides a clear view of the possible states a payment can assume in their lifecycle.</p> <p></p> <p>After initiating the payment, it enters the <code>CREATED</code> state. At this point, you can force a cancellation, which will move the payment to the <code>CANCELED</code> state, ending its lifecycle.</p> <p>If the flow proceeds without cancellation, the payment can follow one of two paths: - In a manual capture scenario, after the customer completes the payment, the transaction moves to the <code>AUTHORIZED</code> state. From here, you can either cancel the payment (moving it to <code>CANCELED</code>) or capture it, transitioning the payment to the <code>COMPLETED</code> state. - In an automatic capture scenario, the payment will bypass the <code>AUTHORIZED</code> state and move directly to <code>COMPLETED</code> upon successful payment.</p> <p>Once the payment reaches the <code>COMPLETED</code> state, it can be refunded, transitioning it to the <code>REFUNDED</code> state. In either case, the payment has reached a final state.</p>"},{"location":"starting/","title":"Getting started","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"starting/#code-annotation-examples","title":"Code Annotation Examples","text":""},{"location":"webhooks/","title":"Webhooks","text":"<p>This document describes our strategies for ensuring reliable webhook delivery to our clients. It details the methods we employ to guarantee the integrity and confidentiality of webhook transmissions, the structure of the payload we send, and the process for confirming successful delivery of the webhooks.</p>"},{"location":"webhooks/#content","title":"Content","text":"<ul> <li>Payload Structure</li> <li>Security and Verification</li> <li>Webhook Delivery Confirmation</li> </ul>"},{"location":"webhooks/#payload-structure","title":"Payload Structure","text":"<p>The webhook payload consists of two main parts:</p> <ol> <li>payload: Contains the event details.</li> <li>metadata: Contains additional information for verifying the authenticity of the payload.</li> </ol> <p>An example payload is shown below:</p> <pre><code>{\n  \"payload\": {\n    \"event\": \"PAYMENT_AUTHORIZED\",\n    \"reference\": \"your-product-reference\",\n    \"payment-id\": \"payment-order-id\"\n  },\n  \"metadata\": {\n    \"signature\": \"CxyPzcjL9SPiXZGFpKp+/p6Lj1GciIQ3owm{...}fgULDtJ3YUsdweCirc9IJf2VEO4gBwEV2xw==\",\n    \"timestamp\": \"1721317618422\",\n    \"keyword\": \"secret-key\"\n  }\n}\n</code></pre>"},{"location":"webhooks/#fields","title":"Fields","text":""},{"location":"webhooks/#payload","title":"Payload","text":"<p>The payload contains information about the event and has a consistent format across all events.</p> Field Description Type event The type of event being reported. String reference The client's reference. String payment-id Our unique payment order identification. String <p>The possible events are:</p> <ul> <li>PAYMENT_AUTHORIZED: The payment is authorized.</li> <li>PAYMENT_COMPLETED: The payment it was completed (captured).</li> <li>PAYMENT_CANCELLED: The payment was cancelled.</li> </ul>"},{"location":"webhooks/#metadata","title":"Metadata","text":"<p>The metadata contains information for verifying the authenticity of the payload.</p> Field Description Type signature A base64 RSA digital signature. String timestamp The timestamp when the payload was created, in Unix epoch milliseconds. String keyword An agreed-upon secret keyword. String"},{"location":"webhooks/#security-and-verification","title":"Security and Verification","text":"<p>To verify the authenticity of the webhooks, we employ two strategies: the Keyword strategy and the Signature strategy.</p>"},{"location":"webhooks/#keyword-strategy","title":"Keyword Strategy","text":"<p>This straightforward strategy involves using an agreed-upon keyword to verify the authenticity of the payload.</p> <p>Steps to Verify:</p> <ol> <li>Save the keyword: Store the agreed-upon keyword.</li> <li>Compare the keyword: When receiving the request, compare the keyword in the payload with the stored keyword to ensure they match.</li> </ol>"},{"location":"webhooks/#signature-strategy","title":"Signature Strategy","text":"<p>This more secure strategy involves digital signatures and RSA public keys.</p> <p>Steps to Verify:</p> <ol> <li>Save the public key: After subscribing to our webhooks, you will receive an RSA public key in the PKCS8 format. Store this key securely.</li> <li> <p>Hash the payload:</p> <ul> <li>Remove all spaces from the raw payload to normalize it.</li> </ul> <p>Raw payload: <pre><code>{\n  \"event\": \"PAYMENT_AUTHORIZED\",\n  \"reference\": \"reference-id\",\n  \"payment-id\": \"d76d1fcb-9a9e-489b-a71b-25304c2d8c5c\"\n}\n</code></pre></p> <p>Processed payload: <pre><code>{\"event\":\"PAYMENT_AUTHORIZED\",\"reference\":\"reference-id\",\"payment-id\":\"d76d1fcb-9a9e-489b-a71b-25304c2d8c5c\"}\n</code></pre> - Generate a SHA-256 hash of the processed payload. For example:   <pre><code>e9f77536b9fc6ec2853fdd4d0026ca29541e741b225d8ce9107e612350149a15\n</code></pre> 3. Verify the signature: Use the stored public key, the generated payload hash, and the signature provided in the metadata to verify the signature.</p> <ul> <li>Load the public key into the program.</li> <li>Verify the signature using the <code>SHA512 RSA</code> algorithm.</li> </ul> </li> </ol> <p>Warning</p> <p>Be careful to use the correct algorithms! The signature is using <code>SHA512 RSA</code>, the public key is in the <code>PKCS8</code> format, and the hash is generated with <code>SHA-256</code>.</p> <p>Example Code of Signature Strategy</p> JavaPython <pre><code>import java.nio.charset.StandardCharsets;\nimport java.security.KeyFactory;\nimport java.security.MessageDigest;\nimport java.security.PublicKey;\nimport java.security.Signature;\nimport java.security.spec.X509EncodedKeySpec;\nimport java.util.Base64;\n\nclass PayloadValidation {\n\n    private static PublicKey parsePublicKey(String publicKeyString) throws Exception {\n        publicKeyString = publicKeyString\n                .replace(\"\\n\", \"\")\n                .replace(\"-----END PUBLIC KEY-----\", \"\")\n                .replace(\"-----BEGIN PUBLIC KEY-----\", \"\");\n\n        byte[] publicKeyBytes = Base64.getDecoder().decode(publicKeyString);\n        X509EncodedKeySpec keySpec = new X509EncodedKeySpec(publicKeyBytes);\n        KeyFactory keyFactory = KeyFactory.getInstance(\"RSA\");\n        return keyFactory.generatePublic(keySpec);\n    }\n\n    private static boolean verifyMessage(String publicKeyStr, String plainText, String signature) throws Exception {\n        Signature publicSignature = Signature.getInstance(\"SHA512withRSA\");\n        PublicKey publicKey = parsePublicKey(publicKeyStr);\n        publicSignature.initVerify(publicKey);\n        publicSignature.update(plainText.getBytes(StandardCharsets.UTF_8));\n        byte[] signatureBytes = Base64.getDecoder().decode(signature);\n        return publicSignature.verify(signatureBytes);\n    }\n\n    public static String generateSHA256Hash(String string) throws Exception {\n        MessageDigest digest = MessageDigest.getInstance(\"SHA-256\");\n        byte[] encodedHash = digest.digest(string.getBytes(StandardCharsets.UTF_8));\n        return bytesToHex(encodedHash);\n    }\n\n    private static String bytesToHex(byte[] hash) {\n        StringBuilder hexString = new StringBuilder(2 * hash.length);\n        for (byte b : hash) {\n            String hex = Integer.toHexString(0xff &amp; b);\n            if (hex.length() == 1) {\n                hexString.append('0');\n            }\n            hexString.append(hex);\n        }\n        return hexString.toString();\n    }\n\n    public static void main(String[] args) {\n        String signature = \"signature\";\n        String publicKeyStr = \"public key\";\n        String payloadStr = \"{\\\"event\\\":\\\"PAYMENT_AUTHORIZED\\\",\\\"reference\\\":\\\"reference-id\\\",\\\"payment-id\\\":\\\"d76d1fcb-9a9e-489b-a71b-25304c2d8c5c\\\"}\";\n\n        try {\n            String payloadHash = generateSHA256Hash(payloadStr);\n            boolean isValid = verifyMessage(publicKeyStr, payloadHash, signature);\n            System.out.println(\"The signature is \" + (isValid ? \"valid\" : \"invalid\"));\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre> <pre><code>import base64\nimport hashlib\n\nfrom cryptography.exceptions import InvalidSignature\nfrom cryptography.hazmat.primitives import hashes\nfrom cryptography.hazmat.primitives import serialization\nfrom cryptography.hazmat.primitives.asymmetric import padding\n\n\ndef generate_sha256_hash(string):\n    return hashlib.sha256(string.encode('utf-8')).hexdigest()\n\n\n# Load the public key\npublic_key_pem = b\"\"\"-----BEGIN PUBLIC KEY-----\nyour-public-key\n-----END PUBLIC KEY-----\"\"\"\npublic_key = serialization.load_pem_public_key(public_key_pem)\n\n# Decode the signature\ndecoded_signature = base64.b64decode(\"the signature\")\n\n# Hash the payload\npayload = '{\"event\":\"PAYMENT_AUTHORIZED\",\"reference\":\"reference-id\",\"payment-id\":\"d76d1fcb-9a9e-489b-a71b-25304c2d8c5c\"}'\npayload_hash = generate_sha256_hash(payload)\n\n# Verify the signature\ntry:\n    public_key.verify(\n        decoded_signature,\n        payload_hash.encode('utf-8'),\n        padding.PKCS1v15(),\n        hashes.SHA512()\n    )\n    print(\"The signature is valid.\")\nexcept InvalidSignature:\n    print(\"The signature is invalid.\")\n</code></pre>"},{"location":"webhooks/#webhook-delivery-confirmation","title":"Webhook Delivery Confirmation","text":"<p>To ensure reliable delivery of webhooks, we implement a retry mechanism and notification system.</p>"},{"location":"webhooks/#confirming-successful-reception","title":"Confirming Successful Reception","text":"<p>A webhook is considered successfully delivered when the client's server responds with an HTTP status code in the <code>2XX</code> range. Specifically:</p> <ul> <li>Status codes <code>200-299</code> indicate successful reception.</li> <li>Any status code outside this range (e.g., <code>3XX</code>, <code>4XX</code>, <code>5XX</code>) is treated as a failed delivery and it will be considered as a non delivery webhook.</li> </ul>"},{"location":"webhooks/#retry-mechanism","title":"Retry Mechanism","text":"<p>If the initial webhook delivery attempt fails, our system automatically initiates a series of retry attempts:</p> <p>Retries are performed at increasing intervals:</p> <ul> <li>5 tries</li> <li>With a backoff ratio of 1.1 over a 15 seconds interval</li> <li>Trigger rate, approximately, in seconds: 0, ~15, ~32, ~50, ~70</li> </ul>"},{"location":"webhooks/#notification-process-for-persistent-failures","title":"Notification Process for Persistent Failures","text":"<p>If all retry attempts are exhausted without a successful delivery, our system triggers a notification process:</p> <ol> <li>Notifications are sent to a predefined list of email addresses associated with the client's webhook configuration.</li> <li>This email list is established during the initial webhook setup process.</li> <li>The notification email includes:<ul> <li>Details of the failed webhook, like:<ul> <li>Timestamp</li> <li>Payment and order reference</li> <li>Event type</li> </ul> </li> </ul> </li> </ol>"},{"location":"widget/","title":"Payment Gateway Widget","text":"<p>Documentation for iCliGo\u2019s payment platform.</p> <p>There are two ways to present the payment interface:</p> <ol> <li>Widget</li> <li>External Page</li> </ol>"},{"location":"widget/#prerequisite","title":"Prerequisite","text":"<p>To initiate a payment, a payment intent (paymentId) must be created beforehand.</p> <p>In this documentation, we will use the following session as an example.</p> <pre><code>const paymentId = 'f283a5e8-87fd-40cd-b506-c58ff3e0d6d4';\n</code></pre>"},{"location":"widget/#widget-mode","title":"Widget Mode","text":"<p>Use the widget mode to embed the form into an existing page.</p>"},{"location":"widget/#assets","title":"Assets","text":"<p>CSS and Script to include in the html page.</p> <pre><code>&lt;!-- Widget styles --&gt;\n&lt;link\n  rel=\"stylesheet\"\n  href=\"https://icligo-payments.icligo.com/payment-gateway/widgets/styles/style.css\"\n  data-asset-type=\"stylesheet\" /&gt;\n\n&lt;!-- Widget library --&gt;\n&lt;script\n  type=\"application/javascript\"\n  src=\"https://icligo-payments.icligo.com/payment-gateway/widgets/index.umd.js\"&gt;&lt;/script&gt;\n</code></pre>"},{"location":"widget/#initialise-widget","title":"Initialise Widget","text":"<p>To initialise the Widget, include the assets defined above and:</p> <ol> <li> <p>Include the HTML element where the widget is loaded (container).</p> <pre><code>&lt;!-- Widget container --&gt;\n&lt;icligo-widget-app data-widget=\"payment-form\"&gt;&lt;/icligo-widget-app&gt;\n</code></pre> <p>Attributes</p> Attribute Required Description <code>data-widget</code> true Unique element ID </li> <li> <p>Execute function PaymentForm (window.iCligoPaymentGateway.widgets.PaymentForm)</p> <pre><code>&lt;!-- Start Widget --&gt;\n&lt;script type=\"application/javascript\"&gt;\n  ((widget) =&gt; {\n    const props = {\n      paymentId: 'f283a5e8-87fd-40cd-b506-c58ff3e0d6d4',\n      options: {\n        locale: 'pt',\n        showCopyButton: true,\n        vouchers: true\n      },\n      callbacks: {\n        onFinish: (data) =&gt; {\n          console.log('onFinish', data);\n          window.location.href = '/success.html';\n        }\n      }\n    };\n    widget('payment-form', props);\n  })(window.iCligoPaymentGateway.widgets.PaymentForm);\n&lt;/script&gt;\n</code></pre> <p>PaymentForm Args</p> <pre><code>window.iCligoPaymentGateway.widgets.PaymentForm(containerId, props)\n</code></pre> Arg Type Required Default Description <code>containerId</code> string true ID defined on HTML element attribute (<code>data-widget</code>) <code>props</code> object true Widget Props <code>props.paymentId</code> string true Payment intent ID <code>props.options</code> object false Widget options <code>props.options.locale</code> Enum <code>\"pt\",\"en\",\"es\"</code> false <code>\"pt\"</code> Widget locale definitions <code>props.options.showCopyButton</code> boolean false <code>true</code> Show button \u2018copy payment link\u2019 <code>props.options.vouchers</code> boolean false <code>true</code> Show voucher\u2019s section <code>props.callbacks</code> object false Widget Callbacks <code>props.callbacks.onFinish</code> (data) =&gt; void false Function invoked after successful payment message (OK Button).Can be used to redirect to a new URL. </li> </ol>"},{"location":"widget/#widget-example","title":"Widget Example","text":"<pre><code>&lt;!doctype html&gt;\n&lt;html lang=\"pt\"&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"UTF-8\" /&gt;\n    &lt;link rel=\"icon\" type=\"image/x-icon\" href=\"https://icligo-payments.icligo.com/payment-gateway/favicon.ico\" /&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" /&gt;\n    &lt;title&gt;iCliGo Payment Widget Demo&lt;/title&gt;\n\n    &lt;!-- Widget styles --&gt;\n    &lt;link\n      rel=\"stylesheet\"\n      href=\"https://icligo-payments.icligo.com/payment-gateway/widgets/styles/style.css\"\n      data-asset-type=\"stylesheet\" /&gt;\n    &lt;!-- Widget library --&gt;\n    &lt;script\n      type=\"application/javascript\"\n      src=\"https://icligo-payments.icligo.com/payment-gateway/widgets/index.umd.js\"&gt;&lt;/script&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div style=\"max-width: 768px; margin: 0 auto\"&gt;\n      &lt;!-- Widget container --&gt;\n      &lt;icligo-widget-app data-widget=\"payment-form\"&gt;&lt;/icligo-widget-app&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Start Widget --&gt;\n    &lt;script type=\"application/javascript\"&gt;\n      ((widget) =&gt; {\n        const props = {\n          paymentId: 'f283a5e8-87fd-40cd-b506-c58ff3e0d6d4',\n          options: {\n            locale: 'pt',\n            showCopyButton: true,\n            vouchers: true\n          },\n          callbacks: {\n            onFinish: (data) =&gt; {\n              console.log('onFinish', data);\n              window.location.href = '/success.html';\n            }\n          }\n        };\n        widget('payment-form', props);\n      })(window.iCligoPaymentGateway.widgets.PaymentForm);\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"widget/#external-page-full-page-url","title":"External Page (full page url)","text":"<p>Open the platform on a new page.</p>"},{"location":"widget/#url-address","title":"URL address","text":"<pre><code>https://icligo-payments.icligo.com/payment-gateway/${locale}?payment=${paymentId}&amp;enableCopy=true&amp;enableVouchers=true\n</code></pre>"},{"location":"widget/#url-paths","title":"URL Paths","text":"Attribute Required Default Description <code>locale</code> false <code>\"pt\"</code> Page locale definitions. Enum: <code>\"pt\",\"en\",\"es\"</code>"},{"location":"widget/#url-params","title":"URL Params","text":"Attribute Required Default Description <code>payment</code> true Payment intent ID <code>enableCopy</code> false true Show button \u2018copy payment link\u2019 <code>enableVouchers</code> false true Show voucher\u2019s section"}]}